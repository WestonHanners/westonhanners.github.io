<!DOCTYPE html>
<html lang="en">
<head>
<!-- Made with Liquid -->
<meta charset=""/>
<base href="/"/>
<title> NSCoding class chaining with Swift | alloc-init</title>


<meta name="description" content="<p>While I was trying to get some Swift classes to conform to
NSCoding so that I could serialize them, I found out that it can be a
little annoying to get the init(coder:) calls to chain through your
class hierarchy. All of the resources I found online suggested that my
initializers need to be declared as convenience, however if I declared
them as such, they would complain that you need to call self’s
designated initializer. I could remove the convenience, but this is
quite annoying because it forced me to do all of my initialization with
a coder. After a little research, I discovered that I needed to remove
the convenience AND make sure I also override the default init. I
believe the issue is that the default init is marked as designated and
forces your subclasses to call init(), if you override without required,
you can call a different initializer from a subclass. Here is a short
example and a <a href="downloads/NSCoding-Playground.zip">Playground</a></p>

" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@westonhanners"/>
<meta name="twitter:creator" content="@westonhanners"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content=" NSCoding class chaining with Swift |  alloc-init"/>
<meta property="og:description" content="<p>While I was trying to get some Swift classes to conform to
NSCoding so that I could serialize them, I found out that it can be a
little annoying to get the init(coder:) calls to chain through your
class hierarchy. All of the resources I found online suggested that my
initializers need to be declared as convenience, however if I declared
them as such, they would complain that you need to call self’s
designated initializer. I could remove the convenience, but this is
quite annoying because it forced me to do all of my initialization with
a coder. After a little research, I discovered that I needed to remove
the convenience AND make sure I also override the default init. I
believe the issue is that the default init is marked as designated and
forces your subclasses to call init(), if you override without required,
you can call a different initializer from a subclass. Here is a short
example and a <a href="downloads/NSCoding-Playground.zip">Playground</a></p>

"/>
<meta property="og:url" content="http://alloc-init.com//blog/2015.08.24"/>
<meta property="og:site_name" content="alloc-init"/>
<meta property="fb:admins" content="weston.hanners"/>
<meta property="og:image" content="images/logo-v3-1000x1000.png" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="test/assets/css/main.css, " type="text/css"/>
<link rel="icon" href="images/logo-v3-16x16.png" sizes="16x16" />
<link rel="icon" href="images/logo-v3-32x32.png" sizes="32x32" />
<link rel="icon" href="images/logo-v3-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="images/logo-v3-180x180.png" />
</head>

<body>
<header class="header">
  <div class="banner">
	<a href="./">
	...alloc] init];
	</a>
</div>
<div class="navcontainer">
<div id="topnav" class="navitems">
<a href="./">[Home]</a>
<a href="./about">[about me]</a>
<a href="./resources">[resources]</a>
<a href="./stuff">[stuff]</a>
<a href="./posts">[posts]</a>
<a href="https://twitter.com/WestonHanners">[Twitter]</a>
<a href="https://github.com/WestonHanners">[Github]</a>
</div>

<div class="icon">
	<a href="javascript:void(0);" onclick="toggleNav()">&#9776;</a>
</div>

</div>
</header>
<section class="content">
  <article>
  <h1 class="article-title">NSCoding class chaining with Swift</h1>
  <h4 class="date-line">Last Updated on Aug 24th, 2015</h4>
  <p>While I was trying to get some Swift classes to conform to
NSCoding so that I could serialize them, I found out that it can be a
little annoying to get the init(coder:) calls to chain through your
class hierarchy. All of the resources I found online suggested that my
initializers need to be declared as convenience, however if I declared
them as such, they would complain that you need to call self’s
designated initializer. I could remove the convenience, but this is
quite annoying because it forced me to do all of my initialization with
a coder. After a little research, I discovered that I needed to remove
the convenience AND make sure I also override the default init. I
believe the issue is that the default init is marked as designated and
forces your subclasses to call init(), if you override without required,
you can call a different initializer from a subclass. Here is a short
example and a <a href="downloads/NSCoding-Playground.zip">Playground</a></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Person: NSObject, NSCoding {

    var name: String = "Bob"

    override init() {
        super.init()
    }

    required init(coder aDecoder: NSCoder) {
        self.name = aDecoder.decodeObjectForKey("name") as! String
    }

    func encodeWithCoder(aCoder: NSCoder) {
        aCoder.encodeObject(self.name, forKey: "name")
    }
}

class Employee: Person {

    var position: String = "Manager"

    override init() {
        super.init()
    }

    required init(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
        self.position = aDecoder.decodeObjectForKey("position") as! String
    }

    override func encodeWithCoder(aCoder: NSCoder) {
        super.encodeWithCoder(aCoder)
        aCoder.encodeObject(self.position, forKey: "position") 
    }
}

var person = Employee()
person.name = "Bill"
person.position = "Worker"

print(person.name)
print(person.position)

let data = NSKeyedArchiver.archivedDataWithRootObject(person)
let newPerson = NSKeyedUnarchiver.unarchiveObjectWithData(data) as? Employee

print(person.name)
print(person.position)
</code></pre></div></div>

<blockquote>
  <p>This has been tested with Swift 1.2</p>
</blockquote>


  </article>
</section>
<script type="text/javascript" async defer src="/js/navigation.min.js"></script>
<script type="text/javascript" async defer src="/js/asyncyoutube.min.js"></script>

<div class="footer">
    [ ©2019 <a href="http://twitter.com/@WestonHanners">Weston Hanners</a> | <a href="https://alloc-init.com/feed">rss</a> ]
</div>
<!--Powered by Jekyll and Amazon Lightsail, Alloc Theme by Weston Hanners-->

</body>
</html>
